version: 2

models:
  - name: stg__ercot_prices
    description: >
      Cleansed view of raw ERCOT price data with invalid records removed.
      Source data comes from S3 parquet files of historical pricing.
      
    columns:
      - name: recorded_at
        description: UTC timestamp of price recording
        tests:
          - not_null
          - unique

      - name: region_code
        description: 4-letter ERCOT region code (e.g., 'HB_N')
        tests:
          - not_null

      - name: usd_per_mwh
        description: Electricity price in USD per megawatt-hour
        tests:
          - not_null
          - relationships:
              to: ref('dim_regions')
              field: region_code
              severity: warn

    sources:
      - name: ercot_raw
        tables:
          - name: prices